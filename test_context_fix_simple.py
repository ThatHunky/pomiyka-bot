#!/usr/bin/env python3
"""
–ü—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
"""

def test_old_vs_new_logic():
    """–î–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ —Å—Ç–∞—Ä–æ—é —Ç–∞ –Ω–æ–≤–æ—é –ª–æ–≥—ñ–∫–æ—é"""
    
    print("üîß –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É\n")
    
    # –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    user_message = "–¢—ñ—à–∞... –í–æ–Ω–∞ –≥—É—á–Ω–∞. —è–∫—â–æ –ø—Ä–∏—Å–ª—É—Ö–∞—Ç–∏—Å—å, –≤ –Ω—ñ–π –º–æ–∂—É—Ç—å –∂–∏—Ç–∏ –Ω–µ–≤–∏–¥–∏–º—ñ –∑–≤—É–∫–∏..."
    
    print(f"üìù –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: '{user_message}'\n")
    
    # –°–¢–ê–†–ê –õ–û–ì–Ü–ö–ê (–±—É–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞)
    print("‚ùå –°–¢–ê–†–ê –õ–û–ì–Ü–ö–ê (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞):")
    print("   –°—Ç–≤–æ—Ä—é–≤–∞–≤—Å—è –ø—Ä–æ–º—Ç –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:")
    old_style_prompt = f"""–¢–∏ ‚Äî –ì—Ä—è–≥, –∞–±—Å—É—Ä–¥–Ω–∏–π –¥—É—Ö —á–∞—Ç—É –∑ –¥–æ—Ç–µ–ø–Ω–∏–º –≥—É–º–æ—Ä–æ–º.

–°–∏—Ç—É–∞—Ü—ñ—è:
- –¢–∏–ø —Ä–æ–∑–º–æ–≤–∏: —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–µ
- –ù–∞—Å—Ç—Ä—ñ–π: –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π
- –†—ñ–≤–µ–Ω—å –∑–∞–ª—É—á–µ–Ω–æ—Å—Ç—ñ: 8/10
- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Ç–æ–Ω: –≥–ª–∏–±–æ–∫–∏–π_–∞–±—Å—É—Ä–¥

–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "{user_message}"

–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è: –§—ñ–ª–æ—Å–æ—Ñ—Å—Ç–≤—É–π –∞–±—Å—É—Ä–¥–Ω–æ, —Å—Ç–∞–≤—å –¥–∏–≤–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è.

–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∫–æ—Ä–æ—Ç–∫–æ (1-2 —Ä–µ—á–µ–Ω–Ω—è), –¥–æ—Ç–µ–ø–Ω–æ —Ç–∞ –ø–æ-—É–∫—Ä–∞—ó–Ω—Å—å–∫–∏."""
    
    print(f"   –ü—Ä–æ–º—Ç: '{old_style_prompt[:100]}...'")
    print("   ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–º—ñ—à—É–≤–∞–ª–æ—Å—è –∑ –ø—Ä–æ–º—Ç–æ–º!")
    print("   ‚ö†Ô∏è –¶–µ —Ä–æ–±–∏–ª–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∞–∂–∫–∏–º–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è\n")
    
    # –ù–û–í–ê –õ–û–ì–Ü–ö–ê (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞)
    print("‚úÖ –ù–û–í–ê –õ–û–ì–Ü–ö–ê (–ø—Ä–∞–≤–∏–ª—å–Ω–∞):")
    print(f"   –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è: '{user_message}'")
    
    new_tone_instruction = "–§—ñ–ª–æ—Å–æ—Ñ—Å—Ç–≤—É–π –∞–±—Å—É—Ä–¥–Ω–æ, —Å—Ç–∞–≤—å –¥–∏–≤–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è. (–¢–∏–ø —Ä–æ–∑–º–æ–≤–∏: —Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–µ, –Ω–∞—Å—Ç—Ä—ñ–π: –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π, –∑–∞–ª—É—á–µ–Ω—ñ—Å—Ç—å: 8/10)"
    print(f"   –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è —Ç–æ–Ω—É –æ–∫—Ä–µ–º–æ: '{new_tone_instruction}'")
    
    print("   ‚úÖ –ü–ï–†–ï–í–ê–ì–ò:")
    print("     - –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —á–∏—Ç–∞—î–º–∏–º")
    print("     - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –≤ Gemini")
    print("     - –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —Ç–æ–Ω—É –∑—Ä–æ–∑—É–º—ñ–ª—ñ —Ç–∞ –∫–æ—Äe–∫—Ç–Ω—ñ")
    print("     - –ù–µ–º–∞—î –∑–º—ñ—à—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º")

def test_context_separation():
    """–¢–µ—Å—Ç—É—î —â–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ–ø–µ—Ä –æ–∫—Ä–µ–º–∏–π"""
    
    print("\nüß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É:\n")
    
    # –ü—Ä–∏–∫–ª–∞–¥ –∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Ç—É (–∑—ñ —Å–∫—Ä—ñ–Ω—à–æ—Ç—É)
    chat_messages = [
        "—Ü–∏—Ñ—Ä—ñ–∫",
        "–Ω–µ –ø—Ä–æ—Å—Ç–æ —Ü–∏—Ñ—Ä—ñ–∫", 
        "—Ü—è –≤–∞–≥–∞ –∫–æ–∂–Ω–æ–≥–æ –Ω–µ–ø—Ä–∏–≤—ñ–ª–µ–π–Ω–æ–≥–æ –ø–∏–ª–∏–Ω–æ–∫",
        "—â–æ –ø—Ä–æ–≥–∞–Ω—Ü—é–≤–∞–ª–∏ –∫—Ä—ñ–∑—å –µ–∫—Ä–∞–Ω"
    ]
    
    current_msg = "–ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –º—ñ–Ω—ñ–º—É–º—É —É –¥–∂–µ—Ä–µ–ª–∞ –ø—ñ–¥ –≤–ª–∞–¥–Ω—É –ø–∏—Ç–∞–Ω–Ω—è –∑—ñ –∑–≤—É–∫–∞"
    
    print("üí¨ –ö–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç—É:")
    for i, msg in enumerate(chat_messages, 1):
        print(f"   {i}. '{msg}'")
    
    print(f"\nüí¨ –ü–æ—Ç–æ—á–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: '{current_msg}'")
    
    # –ù–æ–≤–∞ –ª–æ–≥—ñ–∫–∞ - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ù–ï –∑–º—ñ—à—É—î—Ç—å—Å—è
    analysis_result = {
        'type': '—Ñ—ñ–ª–æ—Å–æ—Ñ—Å—å–∫–µ',
        'mood': '–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π', 
        'engagement': 9,
        'response_tone': '–≥–ª–∏–±–æ–∫–∏–π_–∞–±—Å—É—Ä–¥'
    }
    
    tone_instruction = f"–§—ñ–ª–æ—Å–æ—Ñ—Å—Ç–≤—É–π –∞–±—Å—É—Ä–¥–Ω–æ, —Å—Ç–∞–≤—å –¥–∏–≤–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è. (–¢–∏–ø —Ä–æ–∑–º–æ–≤–∏: {analysis_result['type']}, –Ω–∞—Å—Ç—Ä—ñ–π: {analysis_result['mood']}, –∑–∞–ª—É—á–µ–Ω—ñ—Å—Ç—å: {analysis_result['engagement']}/10)"
    
    print(f"\nüéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª—ñ–∑—É:")
    print(f"   –¢–∏–ø: {analysis_result['type']}")
    print(f"   –ù–∞—Å—Ç—Ä—ñ–π: {analysis_result['mood']}")
    print(f"   –ó–∞–ª—É—á–µ–Ω—ñ—Å—Ç—å: {analysis_result['engagement']}/10")
    
    print(f"\nüìù –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è Gemini: '{tone_instruction}'")
    
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —â–æ –∂–æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –∑–º—ñ—à–∞–ª–æ—Å—è
    messages_found = []
    for msg in chat_messages + [current_msg]:
        if msg in tone_instruction:
            messages_found.append(msg)
    
    if messages_found:
        print(f"\n‚ùå –ü–û–ú–ò–õ–ö–ê: –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó: {messages_found}")
    else:
        print("\n‚úÖ –£–°–ü–Ü–•: –ñ–æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –∑–º—ñ—à–∞–ª–æ—Å—è –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é!")
        print("‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ–ø–µ—Ä –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ")

def main():
    print("üîß –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –≤—Å—Ç–∞–≤–ª—è–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è\n")
    print("="*70)
    
    test_old_vs_new_logic()
    test_context_separation()
    
    print("\n" + "="*70)
    print("üéâ –í–ò–°–ù–û–í–û–ö:")
    print("‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –±—ñ–ª—å—à–µ –ù–ï –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤")
    print("‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è —á–∏—Ç–∞—î–º–∏–º–∏ —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω–∏–º–∏")
    print("‚úÖ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —Ç–æ–Ω—É –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –≤ Gemini")
    print("‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∑—ñ —Å–∫—Ä—ñ–Ω—à–æ—Ç—É –≤–∏—Ä—ñ—à–µ–Ω–∞!")

if __name__ == "__main__":
    main()
