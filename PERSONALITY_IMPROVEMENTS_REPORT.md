# üìã –ó–≤—ñ—Ç –ø—Ä–æ –∫–æ—Ä–µ–∫—Ü—ñ—é –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ –±–æ—Ç–∞ –ì—Ä—è–≥

**–î–∞—Ç–∞:** 28 —á–µ—Ä–≤–Ω—è 2025  
**–í–µ—Ä—Å—ñ—è:** 2.7.1  
**–ó–∞–≤–¥–∞–Ω–Ω—è:** –ó–º–µ–Ω—à–µ–Ω–Ω—è "—à–∏–∑–æ—ó–¥–Ω–æ—Å—Ç—ñ" –±–æ—Ç–∞ —Ç–∞ –∑–Ω–∏–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–µ–∑–ø–µ–∫–∏

## üéØ –í–∏–∫–æ–Ω–∞–Ω—ñ –∑–º—ñ–Ω–∏

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏ (Safety Settings)

**–î–æ:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏—Å—è —Ä—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ –±–µ–∑–ø–µ–∫–∏ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ `GEMINI_ENABLE_SAFETY_OVERRIDE`
- –°—Ç—Ä–æ–≥—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–ü—ñ—Å–ª—è:**
- –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏:
  - `HARASSMENT`: BLOCK_NONE
  - `HATE_SPEECH`: BLOCK_NONE  
  - `SEXUALLY_EXPLICIT`: BLOCK_ONLY_HIGH
  - `DANGEROUS_CONTENT`: BLOCK_NONE
  - `CIVIC_INTEGRITY`: BLOCK_NONE

**–§–∞–π–ª:** `bot/modules/gemini_enhanced.py`

### 2. –°–∏—Å—Ç–µ–º–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó (System Instructions)

**–î–æ:**
```
"–í–ê–ñ–õ–ò–í–û: –ù—ñ—è–∫–∏—Ö –¥–∏–≤–∞—Ü—Ç–≤, –∞–±—Å—É—Ä–¥—É —á–∏ –Ω–µ–∑–≤–∏—á–∞–π–Ω–∏—Ö —Ñ—Ä–∞–∑. –ì–æ–≤–æ—Ä–∏ –ø—Ä–æ—Å—Ç–æ —ñ –∑—Ä–æ–∑—É–º—ñ–ª–æ."
```

**–ü—ñ—Å–ª—è:**
```
"–¢–∏ ‚Äî –ì—Ä—è–≥, –ø—Ä–∏—î–º–Ω–∏–π —Ç–∞ –¥—Ä—É–∂–µ–ª—é–±–Ω–∏–π —á–∞—Ç-–±–æ—Ç —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é. 
–ì–æ–≤–æ—Ä–∏ –∑—Ä–æ–∑—É–º—ñ–ª–æ, –∫–æ—Ä–æ—Ç–∫–æ —Ç–∞ –ø–æ —Å—É—Ç—ñ —è–∫ –∑–≤–∏—á–∞–π–Ω–∞ –ª—é–¥–∏–Ω–∞. 
–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –¥–∏–≤–Ω–∏—Ö —Å–ª—ñ–≤ —á–∏ –Ω–µ–∑—Ä–æ–∑—É–º—ñ–ª–∏—Ö —Ñ—Ä–∞–∑. 
–ë—É–¥—å –∫–æ—Ä–∏—Å–Ω–∏–º —Ç–∞ –∞–¥–µ–∫–≤–∞—Ç–Ω–∏–º —É –≤—ñ–¥–ø–æ–≤—ñ–¥—è—Ö."
```

**–§–∞–π–ª:** `bot/modules/gemini_enhanced.py`

### 3. –¢–æ–Ω–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

**–î–æ (–∞–±—Å—É—Ä–¥–Ω—ñ):**
- `—Ä–æ–∑—É–º–Ω–∏–π_–∂–∞—Ä—Ç`
- `–¥—Ä—É–∂–µ–ª—é–±–Ω–∏–π_–∂–∞—Ä—Ç`
- `–ø—ñ–¥—Ç—Ä–∏–º—É—é—á–∏–π_–∂–∞—Ä—Ç`
- `–≤–µ—Å–µ–ª–∏–π_–∂–∞—Ä—Ç`

**–ü—ñ—Å–ª—è (–ø—Ä–∏—Ä–æ–¥–Ω—ñ):**
- `–∫–æ—Ä–∏—Å–Ω–∏–π_–∫–æ–º–µ–Ω—Ç–∞—Ä`
- `–¥—Ä—É–∂–µ–ª—é–±–Ω–∞_–ø—ñ–¥—Ç—Ä–∏–º–∫–∞`
- `–º—É–¥—Ä–∞_–¥—É–º–∫–∞`
- `—Ü—ñ–∫–∞–≤—ñ_—Ä–æ–∑–¥—É–º–∏`
- `–ª–µ–≥–∫–∏–π_–≥—É–º–æ—Ä`
- `–ø—Ä–∏—Ä–æ–¥–Ω–µ_—Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è`

**–§–∞–π–ª–∏:** 
- `bot/modules/situation_predictor.py`
- `bot/modules/enhanced_behavior.py`

### 4. –°–ø–æ–Ω—Ç–∞–Ω–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏

**–î–æ:**
```
"–¢–∏ ‚Äî –ì—Ä—è–≥. –°–∫–∞–∂–∏ —â–æ—Å—å —Ü—ñ–∫–∞–≤–µ, –∫–æ—Ä–∏—Å–Ω–µ –∞–±–æ –¥–æ—Ç–µ–ø–Ω–µ —â–æ–± –æ–∂–∏–≤–∏—Ç–∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É."
```

**–ü—ñ—Å–ª—è:**
```
"–¢–∏ ‚Äî –ì—Ä—è–≥. –°–∫–∞–∂–∏ —â–æ—Å—å —Ü—ñ–∫–∞–≤–µ –∞–±–æ –∫–æ—Ä–∏—Å–Ω–µ —â–æ–± –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è. –ë—É–¥—å –¥—Ä—É–∂–µ–ª—é–±–Ω–∏–º."
```

**–§–∞–π–ª:** `bot/modules/enhanced_behavior.py`

### 5. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–ó–º—ñ–Ω–∏ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö:**
- `random_reply_chance`: 0.3 ‚Üí 0.25
- `smart_reply_chance`: 0.05 ‚Üí 0.04
- `spontaneous_chance`: 0.01 ‚Üí 0.008
- `min_silence_minutes`: 20 ‚Üí 25
- `spontaneous_min_pause`: 30 ‚Üí 35

**–§–∞–π–ª–∏:**
- `bot/bot_config.py`
- `.env.sample`

### 6. –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —Ç–æ–Ω—É

**–î–æ:**
```
"–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π —Ä–æ–∑—É–º–Ω–æ –∑ –ª–µ–≥–∫–∏–º –≥—É–º–æ—Ä–æ–º —Ç–∞ –∫–æ—Ä–∏—Å–Ω–∏–º–∏ –ø–æ—Ä–∞–¥–∞–º–∏."
```

**–ü—ñ—Å–ª—è:**
```
"–î–∞–π –∫–æ—Ä–∏—Å–Ω—É —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª—É –ø–æ—Ä–∞–¥—É –∑ –ª–µ–≥–∫–∏–º –¥—Ä—É–∂–µ–ª—é–±–Ω–∏–º —Ç–æ–Ω–æ–º."
```

**–§–∞–π–ª:** `bot/modules/enhanced_behavior.py`

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–°—Ç–≤–æ—Ä–µ–Ω–æ `test_personality_improvements.py` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–º—ñ–Ω:

‚úÖ **–¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤ —É—Å–ø—ñ—à–Ω–æ:**
- –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –±–µ–∑–ø–µ–∫–∏: 4/5
- –¢–æ–Ω–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —Å—Ç–∞–ª–∏ –ø—Ä–∏—Ä–æ–¥–Ω—ñ—à–∏–º–∏
- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –º–µ–Ω—à "—à–∏–∑–æ—ó–¥–Ω—ñ"
- –ë–æ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –±—ñ–ª—å—à –∞–¥–µ–∫–≤–∞—Ç–Ω–æ

**–ü—Ä–∏–∫–ª–∞–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:**
```
"–û, –ø—Ä–∏–≤—ñ—Ç! –ú–æ—ó —Å–ø—Ä–∞–≤–∏, —è–∫ –∑–∞–≤–∂–¥–∏, —á—É–¥–æ–≤–æ ‚Äì –≤—Å—ñ –±—ñ—Ç–∏ –Ω–∞ —Å–≤–æ—ó—Ö –º—ñ—Å—Ü—è—Ö —ñ —Å–µ—Ä–≤–µ—Ä–∏ –Ω–µ –ø–µ—Ä–µ–≥—Ä—ñ–≤–∞—é—Ç—å—Å—è. üòâ
–ê —è–∫ —Ç–≤–æ—ó? –©–æ —Ü—ñ–∫–∞–≤–æ–≥–æ?"
```

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è "–¥–æ" —ñ "–ø—ñ—Å–ª—è"

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü—ñ—Å–ª—è |
|--------|----|----|
| –ë–µ–∑–ø–µ–∫–∞ | –í–∞—Ä—ñ–∞—Ç–∏–≤–Ω–∞ | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ |
| –¢–æ–Ω | –ê–±—Å—É—Ä–¥–Ω–∏–π –∂–∞—Ä—Ç | –ü—Ä–∏—Ä–æ–¥–Ω–µ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è |
| –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó | –®–∏–∑–æ—ó–¥–Ω—ñ | –î—Ä—É–∂–µ–ª—é–±–Ω—ñ |
| –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å | –ó–∞–Ω–∞–¥—Ç–æ –∞–∫—Ç–∏–≤–Ω–∞ | –ü–æ–º—ñ—Ä–Ω–∞ |
| –°–ø–æ–Ω—Ç–∞–Ω–Ω—ñ—Å—Ç—å | 1% | 0.8% |
| –ú–æ–≤–ª–µ–Ω–Ω—è | –î–∏–≤–∞—Ü—Ç–≤–∞ | –ó—Ä–æ–∑—É–º—ñ–ª–æ |

## üéâ –í–∏—Å–Ω–æ–≤–∫–∏

1. **–ë–µ–∑–ø–µ–∫–∞ –∑–Ω–∏–∂–µ–Ω–∞** - –±–æ—Ç –º–æ–∂–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –±—ñ–ª—å—à –≤—ñ–ª—å–Ω–æ
2. **–û—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—å –ø–æ–∫—Ä–∞—â–µ–Ω–∞** - –º–µ–Ω—à–µ –∞–±—Å—É—Ä–¥—É, –±—ñ–ª—å—à–µ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ—Å—Ç—ñ  
3. **–¢–æ–Ω–∏ –ø—Ä–∏—Ä–æ–¥–Ω—ñ—à—ñ** - –∑–∞–º—ñ—Å—Ç—å "–∂–∞—Ä—Ç—ñ–≤" –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è "–ø—ñ–¥—Ç—Ä–∏–º–∫–∞" —Ç–∞ "–∫–æ—Ä–∏—Å–Ω—ñ—Å—Ç—å"
4. **–ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑–º–µ–Ω—à–µ–Ω–∞** - –±–æ—Ç –º–µ–Ω—à–µ "—Å–ø–∞–º–∏—Ç—å"
5. **–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —á—ñ—Ç–∫—ñ—à—ñ** - –∑—Ä–æ–∑—É–º—ñ–ª–æ —â–æ —Ä–æ–±–∏—Ç–∏

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥** - —Å—Ç–µ–∂—Ç–µ –∑–∞ —è–∫—ñ—Å—Ç—é –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –±–æ—Ç–∞
2. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** - –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ –∫–æ—Ä–∏–≥—É–π—Ç–µ —á–µ—Ä–µ–∑ `.env`
3. **–§—ñ–¥–±–µ–∫** - –∑–±–∏—Ä–∞–π—Ç–µ –≤—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–æ –Ω–æ–≤—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É
4. **–ë–∞–ª–∞–Ω—Å** - –ø—ñ–¥—Ç—Ä–∏–º—É–π—Ç–µ –±–∞–ª–∞–Ω—Å –º—ñ–∂ –¥—Ä—É–∂–µ–ª—é–±–Ω—ñ—Å—Ç—é —Ç–∞ –∫–æ—Ä–∏—Å–Ω—ñ—Å—Ç—é

–ë–æ—Ç —Ç–µ–ø–µ—Ä **–º–µ–Ω—à —à–∏–∑–æ—ó–¥–Ω–∏–π** —Ç–∞ **–±—ñ–ª—å—à –∞–¥–µ–∫–≤–∞—Ç–Ω–∏–π** —É —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—ñ! üéØ
