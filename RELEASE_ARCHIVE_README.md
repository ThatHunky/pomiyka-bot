# ü§ñ –ì—Ä—è–≥-–±–æ—Ç v3.2 - Gemini Context Enhanced

## üì¶ –ü—Ä–æ–¥–∞–∫—à–Ω –∞—Ä—Ö—ñ–≤: `gryag-bot-gemini-context-enhanced-v3.2-20250628.zip`

### üéØ –ö–ª—é—á–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–µ—Ä—Å—ñ—ó 3.2

#### üöÄ **Gemini 2.5 Flash –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ 1M —Ç–æ–∫–µ–Ω—ñ–≤**
- **–†–ê–ù–Ü–®–ï**: 10,000 —Å–∏–º–≤–æ–ª—ñ–≤ (~5,000 —Ç–æ–∫–µ–Ω—ñ–≤, 0.5% –≤—ñ–¥ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ)
- **–¢–ï–ü–ï–†**: –î–æ 800,000 —Ç–æ–∫–µ–Ω—ñ–≤ (200x –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è!)
- –ù–æ–≤–∏–π –º–æ–¥—É–ª—å `token_counter.py` –¥–ª—è —Ç–æ—á–Ω–æ—ó –æ—Ü—ñ–Ω–∫–∏ —Ç–æ–∫–µ–Ω—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏ –∑ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–æ–º 1.5

#### üß† **–†–æ–∑—É–º–Ω–µ —Å—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É**
- –î–∏–Ω–∞–º—ñ—á–Ω–µ —Å—Ç–∏—Å–∫–∞–Ω–Ω—è –∑–∞ —Ç–æ–∫–µ–Ω–∞–º–∏ (–Ω–µ —Å–∏–º–≤–æ–ª–∞–º–∏)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤–∞–∂–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ LLM
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É

#### ‚öôÔ∏è **–ù–æ–≤—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó**
```bash
BOT_MAX_CONTEXT_TOKENS=800000    # –ú–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω—ñ–≤ –¥–ª—è Gemini
BOT_CONTEXT_CHAR_ESTIMATE=600    # –°–∏–º–≤–æ–ª—ñ–≤ –Ω–∞ —Ç–æ–∫–µ–Ω (—É–∫—Ä–∞—ó–Ω—Å—å–∫–∞)
BOT_TOKENS_PER_CHAR=0.0017       # –¢–æ–∫–µ–Ω—ñ–≤ –Ω–∞ —Å–∏–º–≤–æ–ª
```

### üìÅ –©–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ –∞—Ä—Ö—ñ–≤

#### üéØ **–û—Å–Ω–æ–≤–Ω—ñ –º–æ–¥—É–ª—ñ**
- `bot/modules/token_counter.py` - **–ù–û–í–ò–ô** –º–æ–¥—É–ª—å –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —Ç–æ–∫–µ–Ω—ñ–≤
- `bot/modules/enhanced_behavior.py` - –û–Ω–æ–≤–ª–µ–Ω–∏–π –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —Ç–æ–∫–µ–Ω—ñ–≤
- `bot/modules/gemini_enhanced.py` - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ 1M –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- `bot/bot_config.py` - –ù–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–æ–∫–µ–Ω—ñ–≤

#### üê≥ **Docker & Deployment**
- `Dockerfile` —Ç–∞ `docker-compose.yml`
- `docker-compose.prod.yml` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É
- `deploy.sh` —Ç–∞ `Makefile`

#### üß™ **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
- `test_context_tokens.py` - **–ù–û–í–ò–ô** —Ç–µ—Å—Ç —Ç–æ–∫–µ–Ω—ñ–≤
- –í—Å—ñ —ñ—Å–Ω—É—é—á—ñ —Ç–µ—Å—Ç–∏ –∑ async –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é
- Unit —Ç–µ—Å—Ç–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –º–æ–¥—É–ª—ñ–≤

#### üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**
- `GEMINI_CONTEXT_ENHANCEMENT_REPORT.md` - –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç
- `RELEASE_NOTES_v3.2.md` - –†–µ–ª—ñ–∑–Ω—ñ –Ω–æ—Ç–∞—Ç–∫–∏
- `QUICK_START_v3.2.md` - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

#### 1Ô∏è‚É£ **–†–æ–∑–ø–∞–∫—É–≤–∞—Ç–∏ –∞—Ä—Ö—ñ–≤**
```bash
unzip gryag-bot-gemini-context-enhanced-v3.2-20250628.zip
cd gryag-bot
```

#### 2Ô∏è‚É£ **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ**
```bash
cp .env.sample .env
# –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ .env –∑ –≤–∞—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
```

#### 3Ô∏è‚É£ **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ Docker**
```bash
docker-compose up -d
```

#### 4Ô∏è‚É£ **–ê–±–æ –ª–æ–∫–∞–ª—å–Ω–æ**
```bash
pip install -r requirements.txt
python start.py
```

### üîß –ö—Ä–∏—Ç–∏—á–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
# Telegram
TELEGRAM_BOT_TOKEN=your_bot_token

# Gemini API
GEMINI_API_KEY=your_api_key
GEMINI_MODEL=gemini-2.0-flash-exp

# –ù–û–í–Ü –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–æ–∫–µ–Ω—ñ–≤
BOT_MAX_CONTEXT_TOKENS=800000
BOT_CONTEXT_CHAR_ESTIMATE=600
BOT_TOKENS_PER_CHAR=0.0017

# –ê–¥–º—ñ–Ω
BOT_ADMIN_ID=your_telegram_id
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```
‚úÖ test_token_estimation_ukrainian - –û—Ü—ñ–Ω–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤
‚úÖ test_token_estimation_mixed - –ó–º—ñ—à–∞–Ω–∞ –º–æ–≤–∞
‚úÖ test_context_compression_tokens - –°—Ç–∏—Å–∫–∞–Ω–Ω—è –∑–∞ —Ç–æ–∫–µ–Ω–∞–º–∏
‚úÖ test_gemini_integration_tokens - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Gemini
‚úÖ test_behavior_token_limits - –õ—ñ–º—ñ—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏

üéØ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É: 200x (–∑ 5,000 –¥–æ 800,000 —Ç–æ–∫–µ–Ω—ñ–≤)
```

### üéØ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ

#### üê≥ **Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**
```bash
# –ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
docker-compose -f docker-compose.prod.yml up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f pomiyka-bot
```

#### üìä **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**
```bash
# –ó–¥–æ—Ä–æ–≤'—è –±–æ—Ç–∞
curl http://localhost:8080/health

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/stats - –≤ —Ç–µ–ª–µ–≥—Ä–∞–º—ñ
/analytics - –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —á–∞—Ç—ñ–≤
```

### üîÑ –ú—ñ–≥—Ä–∞—Ü—ñ—è –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–µ—Ä—Å—ñ–π

#### 1. **–ë–µ–∫–∞–ø –¥–∞–Ω–∏—Ö**
```bash
# –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ
cp -r data/ data_backup/
```

#### 2. **–û–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é**
```bash
# –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ –≤ .env
BOT_MAX_CONTEXT_TOKENS=800000
BOT_CONTEXT_CHAR_ESTIMATE=600
BOT_TOKENS_PER_CHAR=0.0017
```

#### 3. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏**
```bash
python -m pytest test_context_tokens.py -v
```

### üÜò –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- üìñ **–î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç**: `GEMINI_CONTEXT_ENHANCEMENT_REPORT.md`
- üöÄ **–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç**: `QUICK_START_v3.2.md`
- üìù **–†–µ–ª—ñ–∑–Ω—ñ –Ω–æ—Ç–∞—Ç–∫–∏**: `RELEASE_NOTES_v3.2.md`
- üîß **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è**: `bot_config.py`

### üèÜ –û—Å–Ω–æ–≤–Ω—ñ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è v3.2

1. **200x –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** - –∑ 5K –¥–æ 800K —Ç–æ–∫–µ–Ω—ñ–≤
2. **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏** - —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏
3. **–†–æ–∑—É–º–Ω–µ —Å—Ç–∏—Å–∫–∞–Ω–Ω—è** - –∑–±–µ—Ä—ñ–≥–∞—î –≤–∞–∂–ª–∏–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
4. **–ü–æ–≤–Ω–∞ –∑–≤–æ—Ä–æ—Ç–Ω–∞ —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å** - –±–µ–∑ –ª–∞–º–∞–Ω–Ω—è API
5. **–ü—Ä–æ–¥–∞–∫—à–Ω –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å** - Docker, —Ç–µ—Å—Ç–∏, –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

---

**üéâ –ì–æ—Ç–æ–≤–æ –¥–æ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è!**
- –ê—Ä—Ö—ñ–≤: `gryag-bot-gemini-context-enhanced-v3.2-20250628.zip` (306KB)
- –î–∞—Ç–∞: 28 —á–µ—Ä–≤–Ω—è 2025
- –í–µ—Ä—Å—ñ—è: v3.2 Gemini Context Enhanced
